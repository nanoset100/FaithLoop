# ✝️ 믿음루프(FaithLoop) 사용설명서

AI+RAG 신앙일기로 결단·기도·적용을 누적하고, 근거 기반으로 나를 돌아보며 작은 실천을 지속합니다.

> **믿음루프(FaithLoop)**는 매일의 감사, 말씀, 적용, 방해요인을 기록하고, AI가 과거 기록을 참조하여 신앙 성장을 돕는 앱입니다.

---

## 📌 목차

1. [앱 시작하기](#1-앱-시작하기)
2. [회원가입 및 로그인](#2-회원가입-및-로그인)
3. [Home - 홈 대시보드](#3-home---홈-대시보드)
4. [설교노트 - 주일 설교 묵상](#4-설교노트---주일-설교-묵상)
5. [오늘의 기록 - 신앙 체크인](#5-오늘의-기록---신앙-체크인)
6. [기도노트 - 기도제목 관리](#6-기도노트---기도제목-관리)
7. [주간 성장 리포트 - AI 분석](#7-주간-성장-리포트---ai-분석)
8. [기억검색 - RAG 검색](#8-기억검색---rag-검색)
9. [Settings - 설정](#9-settings---설정)

---

## 1. 앱 시작하기

### 🖥️ 앱 실행 방법

1. **터미널**(명령 프롬프트)을 열어요
2. 프로젝트 폴더로 이동해요:
   ```bash
   cd M:\MyProject777\FaithLoop
   ```
3. 가상환경 활성화 (이미 생성했다면):
   ```bash
   # Windows
   venv\Scripts\activate
   
   # macOS/Linux
   source venv/bin/activate
   ```
4. 앱을 실행해요:
   ```bash
   streamlit run app.py
   ```
5. 브라우저가 자동으로 열리고 앱이 나타나요! 🎉

### 🌐 앱 접속 주소
- `http://localhost:8501`

---

## 2. 회원가입 및 로그인

### 📝 회원가입

1. 메인 페이지에서 **회원가입** 섹션으로 이동
2. **이메일** 입력 (예: `user@example.com`)
3. **비밀번호** 입력 (6자 이상)
4. **비밀번호 확인** 입력
5. **이름** 입력 (선택사항)
6. **회원가입** 버튼 클릭

> 💡 **초대코드**: 파일럿 기간에는 초대코드가 필요할 수 있습니다. 관리자에게 문의하세요.

### 🔐 로그인

1. 메인 페이지에서 **로그인** 섹션으로 이동
2. **이메일**과 **비밀번호** 입력
3. **로그인** 버튼 클릭

로그인 후 왼쪽 사이드바에 이메일이 표시되고, 메인 콘텐츠가 나타납니다.

### 🚪 로그아웃

왼쪽 사이드바 하단의 **🚪 로그아웃** 버튼을 클릭하세요.

---

## 3. Home - 홈 대시보드

> 🏠 **Home**은 앱의 첫 화면이에요! 최근 신앙 기록과 오늘의 일정을 한눈에 볼 수 있습니다.

### 여기서 볼 수 있는 것들:

#### 📅 오늘 일정 (Google Calendar 연동 시)
- Google Calendar에 연결되어 있으면 오늘 일정이 표시됩니다
- 최대 5개까지 표시되며, 더 많으면 "외 N개 일정..."으로 표시됩니다

#### 📝 최근 신앙 기록
- 최근 10개의 신앙 기록이 표시됩니다
- 각 기록에는 다음 정보가 포함됩니다:
  - **영적 컨디션 이모지**: 🙏(평안), ✨(은혜로움), 📖(보통), 🌧️(분주), 😢(힘듦)
  - **날짜 및 시간**
  - **기록 내용**
  - **태그** (있는 경우)

#### 📊 오늘의 신앙 요약
- **감사/기도 기록**: 오늘 작성한 기록 횟수
- **말씀 묵상**: 오늘의 적용 횟수
- **연속 기록**: 연속으로 기록한 일수

#### ⚡ 빠른 시작 버튼
| 버튼 | 설명 |
|------|------|
| 📖 설교노트 | 주일 설교 요약 및 적용 작성 |
| ✍️ 오늘의 기록 | 감사/말씀/적용 체크인 |
| 🙏 기도노트 | 기도제목 등록 및 응답 추적 |
| 🧠 기억검색 | 과거 기록 RAG 검색 |

### 🧪 데모 데이터 제외

사이드바에서 **🧪 데모 데이터 제외** 체크박스를 선택하면 테스트용 데모 데이터를 제외하고 실제 기록만 볼 수 있습니다.

---

## 4. 설교노트 - 주일 설교 묵상

> 📖 **설교노트**는 주일 설교를 묵상하고 삶에 적용하는 공간입니다.

### 📋 사용 방법

#### Step 1: 설교 선택하기
- 드롭다운에서 원하는 설교를 선택합니다
- 기본적으로 **최신 설교**가 선택되어 있습니다

#### Step 2: 설교 정보 확인하기
각 설교에는 다음 정보가 표시됩니다:
- **제목**: 설교 제목
- **날짜**: 설교 날짜
- **본문**: 설교 본문 구절
- **설교자**: 설교자 이름

#### Step 3: 설교 요약 읽기
- **📌 설교 요약** 섹션에서 설교의 핵심 내용을 확인합니다

#### Step 4: 나의 적용 작성하기
- **✍️ 나의 적용** 섹션에서 이번 주 구체적으로 실천할 내용을 작성합니다
- 설교에 **적용 질문**이 있다면 참고하세요
- 기존에 작성한 적용이 있으면 자동으로 불러옵니다

#### Step 5: 저장하기
- **💾 저장** 버튼을 클릭하면 적용이 저장됩니다
- 저장된 적용은 나중에 다시 수정할 수 있습니다

### 💡 활용 팁

- 매주 주일 설교 후 설교노트를 작성해보세요
- 적용 내용은 구체적으로 작성하면 더 효과적입니다
- 예: "이번 주는 가족에게 감사 인사를 3번 이상 하겠습니다"

---

## 5. 오늘의 기록 - 신앙 체크인

> ✍️ **오늘의 기록**은 매일 감사, 말씀, 적용, 방해요인을 기록하는 핵심 기능입니다.

### 📝 기본 기록 방법

#### Step 1: 영적 컨디션 선택하기
오늘의 영적 상태를 선택하세요:
- 🙏 **평안/감사**: 하나님과의 관계가 평안하고 감사한 하루
- ✨ **은혜로움**: 하나님의 은혜를 느낀 하루
- 📖 **보통**: 특별한 변화 없이 평범한 하루
- 🌧️ **분주/낙심**: 바쁘거나 낙심한 하루
- 😢 **힘든 하루**: 어려움을 겪은 하루

#### Step 2: 영적 에너지 레벨 선택하기
슬라이더를 움직여 현재 영적 에너지 레벨을 표시하세요:
- **1**: 영적 갈급함
- **5**: 보통
- **10**: 하나님과 가까움

#### Step 3: 신앙 기록 작성하기
다음 4가지 질문에 자유롭게 답해보세요:

1. **오늘 감사 1가지**
   - 예: "가족과 함께한 저녁 식사에 감사합니다"

2. **오늘 말씀/적용(결단) 1가지**
   - 예: "'두려워하지 말라' 이사야 41:10 - 내일 담대히 나아가겠습니다"

3. **오늘의 방해요인(분주함/유혹/감정 등)**
   - 예: "SNS에 시간을 많이 뺏겼다"

4. **기타 생각이나 기도제목**

#### Step 4: 태그 입력하기 (선택사항)
관련 키워드를 쉼표로 구분하여 입력하세요:
- 예: `감사, 기도, 말씀, 예배, 공동체`

#### Step 5: AI 설정 선택하기 (사이드바)
- **LLM 기반 구조화 사용**: OpenAI를 사용하여 더 정확하게 정보를 추출합니다
  - **텍스트 정리 (Ingestor)**: 텍스트를 정리/정규화한 후 분석
  - **AI 코멘트 생성**: 체크인에 대한 짧은 AI 코멘트 생성
- LLM 미사용 시 규칙 기반으로 추출됩니다

#### Step 6: 저장하기
**💾 저장하기** 버튼을 클릭하면 기록이 저장됩니다!

### 🎤 음성으로 기록하기 (멀티모달)

글 쓰기 귀찮을 때는 **음성**으로 기록할 수 있어요!

1. **🎙️ 멀티모달 입력** 섹션에서 **🎤 음성 입력** 탭 선택
2. **음성 파일 선택** 버튼 클릭
3. 녹음 파일 업로드 (지원 형식: MP3, WAV, M4A, OGG, WebM, FLAC)
   - 💡 **권장 형식**: MP3 (가장 안정적)
4. 업로드된 파일 미리듣기
5. **🎯 음성 → 텍스트 변환** 버튼 클릭
6. AI가 자동으로 텍스트로 변환해줍니다!
7. 변환된 텍스트를 확인하고 필요시 편집
8. **📋 본문에 추가** 버튼을 클릭하면 본문에 자동으로 추가됩니다

> ⚠️ **주의**: 음성 파일은 25MB 이하를 권장합니다.

### 🖼️ 이미지로 기록하기

손으로 쓴 메모나 사진도 기록할 수 있어요!

1. **🎙️ 멀티모달 입력** 섹션에서 **🖼️ 이미지 입력** 탭 선택
2. **이미지 파일 선택** 버튼 클릭
3. 이미지 파일 업로드 (지원 형식: PNG, JPG, JPEG, WebP)
4. 업로드된 이미지 미리보기
5. **🔍 이미지 분석** 버튼 클릭
6. AI가 이미지를 분석해서 내용을 추출해줍니다!
7. 분석 결과를 확인하고 필요시 편집
8. **📋 본문에 추가** 버튼을 클릭하면 본문에 자동으로 추가됩니다

> ⚠️ **주의**: 이미지 파일은 20MB 이하를 권장합니다.

### 🤖 AI 구조화 결과 확인

저장 후 **📋 저장된 내용 확인** 섹션에서 AI가 추출한 정보를 확인할 수 있습니다:
- **📌 Tasks**: 할 일 목록
- **⚠️ Obstacles**: 방해요인
- **📁 Projects**: 프로젝트 태그
- **💡 Insights**: 인사이트
- **👥 People**: 언급된 사람들
- **😊 Emotions**: 감정 키워드

### 💬 AI 코멘트

AI 코멘트 생성 옵션을 켜면 저장 후 짧은 AI 코멘트가 표시됩니다.

---

## 6. 기도노트 - 기도제목 관리

> 🙏 **기도노트**는 기도제목을 등록하고 응답을 추적하는 공간입니다.

### 📊 통계 확인

페이지 상단에서 다음 통계를 확인할 수 있습니다:
- **전체 기도**: 등록한 전체 기도제목 수
- **기도 중**: 현재 기도 중인 제목 수
- **응답됨**: 응답받은 기도제목 수

### ✍️ 새 기도 등록하기

1. **✍️ 새 기도** 탭 선택
2. **기도제목** 입력 (필수)
   - 예: "가족의 건강을 위해"
3. **상세 내용** 입력 (선택사항)
   - 구체적인 기도 내용을 적어보세요
4. **태그** 선택 (다중 선택 가능)
   - 가족, 건강, 사역, 직장, 감사, 중보, 회개, 기타
5. **등록** 버튼 클릭

### 🙏 기도 중인 제목 관리

1. **🙏 기도 중** 탭 선택
2. 기도 중인 제목 목록 확인
3. 각 제목에 대해 다음 작업 가능:
   - **✏️ 수정**: 제목이나 내용 수정
   - **✅ 응답됨**: 기도 응답 기록
   - **🗑️ 삭제**: 기도제목 삭제

### ✅ 응답된 기도 기록하기

1. 기도 중인 제목에서 **✅ 응답됨** 버튼 클릭
2. **응답 내용** 입력
   - 어떻게 응답받았는지 기록하세요
3. **응답 날짜** 선택 (기본: 오늘)
4. **저장** 버튼 클릭

### 📋 응답된 기도 확인

1. **✅ 응답된 기도** 탭 선택
2. 응답받은 기도제목 목록 확인
3. 각 응답의 상세 내용 확인

### 💡 활용 팁

- 기도제목은 구체적으로 작성하면 좋습니다
- 정기적으로 응답을 확인하고 감사 기록을 남겨보세요
- 태그를 활용하여 카테고리별로 관리하세요

---

## 7. 주간 성장 리포트 - AI 분석

> 📊 **주간 성장 리포트**는 AI가 일주일 동안의 신앙 기록을 분석하여 성장 패턴을 파악해주는 기능입니다.

### 📋 사용 방법

#### Step 1: 기간 선택하기
- **이번 주** 버튼: 이번 주(월~일) 기록 분석
- **지난 주** 버튼: 지난 주 기록 분석
- **지난 2주** 버튼: 최근 2주간 기록 분석
- 또는 **날짜 직접 선택**: 시작일과 종료일을 직접 선택

#### Step 2: 리포트 생성하기
**📝 리포트 생성** 버튼을 클릭하세요.

AI가 열심히 분석하는 동안 잠시 기다려요... ⏳

#### Step 3: 결과 확인하기

AI가 만들어주는 리포트 내용:

| 섹션 | 설명 |
|------|------|
| 💬 **한 줄 요약** | 이번 주를 한 문장으로 요약 |
| 🏆 **이번 주 성취** | 잘한 것들, 감사한 내용 |
| ⚠️ **어려웠던 점** | 방해요인, 힘들었던 것들 |
| 🔄 **발견된 패턴** | 반복되는 습관이나 행동 패턴 |
| 📈 **기분 트렌드** | 영적 컨디션 변화 추이 |
| 📊 **통계** | 체크인 횟수, 태그 분포 등 |
| 🚀 **다음 주 제안** | AI의 조언 및 제안 |

### 💡 활용 팁

- 매주 주일 저녁에 리포트를 확인해보세요
- 패턴을 발견하고 개선점을 찾아보세요
- 다음 주 제안을 참고하여 실천해보세요

---

## 8. 기억검색 - RAG 검색

> 🧠 **기억검색**은 AI가 과거 신앙 기록에서 관련 내용을 찾아 답변해주는 기능입니다. RAG(Retrieval-Augmented Generation) 기술을 사용하여 근거 기반 답변을 제공합니다.

### 📋 사용 방법

#### Step 1: 검색 설정 (사이드바)
- **검색 결과 수**: 유사한 기억을 몇 개까지 찾을지 (3~10개, 기본: 5개)
- **유사도 임계값**: 이 값 이상의 유사도만 표시 (0.3~0.9, 기본: 0.6)
- **컨텍스트 표시**: AI가 참조한 전체 컨텍스트 표시 여부
- **데모 데이터 제외**: 테스트 데이터 제외 여부

#### Step 2: 질문 입력하기
자연어로 질문을 입력하세요.

**좋은 질문 예시**:
- "내가 자주 감사한 내용은?"
- "지난달 방해요인은 무엇이었나?"
- "설교 적용 관련 기록 찾아줘"
- "내가 기도한 제목들은?"
- "영적 컨디션이 좋았던 날은 언제야?"

#### Step 3: 검색하기
**🔎 검색하기** 버튼을 클릭하세요.

#### Step 4: 답변 확인하기

AI가 과거 기록을 찾아서 답변해줍니다!

**답변 구성**:
- **AI 답변**: 질문에 대한 종합적인 답변
- **참조 소스**: AI가 참조한 원본 기록들 (유사도 점수 포함)
- **컨텍스트** (선택 시): 참조한 전체 컨텍스트

### 🔄 체크인 동기화

처음 사용할 때는 **📥 체크인 동기화** 버튼을 한 번 눌러주세요!
- 과거 기록들을 벡터 임베딩으로 변환하여 검색 가능하게 만듭니다
- 동기화 후에는 새로운 기록이 자동으로 인덱싱됩니다 (Settings에서 자동 인덱싱 설정 시)

### 💡 활용 팁

- 구체적인 질문을 하면 더 정확한 답변을 받을 수 있습니다
- "언제", "무엇", "어떻게" 등의 질문이 효과적입니다
- 참조 소스를 확인하여 답변의 근거를 확인하세요

---

## 9. Settings - 설정

> ⚙️ **Settings**는 앱 설정과 연동을 관리하는 공간입니다.

### 🔗 연결 상태 확인

#### 🗄️ Supabase
- 데이터베이스 연결 상태를 확인합니다
- "✅ 연결됨"이 표시되면 정상입니다
- 연결 실패 시 `.streamlit/secrets.toml` 파일을 확인하세요

#### 🤖 OpenAI
- OpenAI API 키 설정 상태를 확인합니다
- "✅ API 키 설정됨"이 표시되면 정상입니다
- 마스킹된 API 키가 표시됩니다 (보안)

### 📅 Google Calendar 연동 (선택사항)

Google Calendar를 연결하면 Home 대시보드에서 오늘 일정을 확인할 수 있습니다.

#### 연결하기
1. **🔑 Google 계정으로 연결** 버튼 클릭
2. Google 로그인 화면에서 로그인
3. 권한 허용하기
4. 자동으로 돌아와서 연결 완료! 🎉

#### 연결 해제하기
- **🔓 Google 연결 해제** 버튼을 클릭하면 연결이 해제됩니다

### 👤 프로필 설정

#### 이름
- 표시 이름을 설정합니다

#### 시간대
- 사용할 시간대를 선택합니다 (기본: Asia/Seoul)

#### 알림 설정 (향후 지원)
- 아침 체크인 알림 (09:00)
- 저녁 회고 알림 (21:00)

**💾 저장** 버튼을 클릭하여 변경사항을 저장하세요.

### 🤖 AI 자동화

#### 체크인 저장 후 자동 인덱싱
- 이 옵션을 켜면 체크인 저장 시 자동으로 RAG 인덱싱이 실행됩니다
- Memory에서 즉시 검색 가능합니다
- OpenAI API 키가 필요합니다

> ⚠️ **주의**: OpenAI API 키가 없으면 자동 인덱싱이 동작하지 않습니다.

---

## 🌟 꿀팁 모음

### 1. 매일 짧게라도 기록하기
하루 5분만 투자해서 간단하게 기록해보세요! 작은 실천이 큰 변화를 만듭니다.

### 2. 솔직하게 쓰기
좋은 것만 쓸 필요 없어요. 힘들었던 것도 적으면 AI가 더 좋은 조언을 해줄 수 있어요.

### 3. 주간 리포트 확인하기
일주일에 한 번은 Report를 확인해서 내 패턴을 알아보세요!

### 4. 설교 적용은 구체적으로
"좋은 사람 되기"보다는 "이번 주 가족에게 감사 인사 3번 이상 하기"처럼 구체적으로 쓰면 실천하기 쉬워요.

### 5. 기도 응답 기록하기
기도 응답을 받으면 꼭 기록하세요! 하나님의 인도하심을 되돌아볼 수 있어요.

### 6. 멀티모달 활용하기
음성이나 이미지로도 기록할 수 있어요. 글 쓰기 귀찮을 때 활용해보세요!

### 7. 태그 활용하기
태그를 잘 활용하면 나중에 검색하기 쉬워요.

---

## ❓ 자주 묻는 질문

### Q: 기록이 저장 안 돼요!
**A:** Home에서 "Supabase 연결됨"이 초록색인지 확인해보세요. Settings에서 연결 상태를 확인할 수 있습니다.

### Q: AI 기능이 작동 안 해요!
**A:** Settings에서 "OpenAI API 키 설정됨"이 초록색인지 확인해보세요. API 키가 올바르게 설정되어 있는지 확인하세요.

### Q: 음성 전사가 안 돼요!
**A:** 
- 지원 형식인지 확인하세요 (MP3, WAV, M4A 등)
- 파일 크기가 25MB 이하인지 확인하세요
- MP3 형식을 권장합니다

### Q: 이미지 분석이 안 돼요!
**A:**
- 지원 형식인지 확인하세요 (PNG, JPG, JPEG, WebP)
- 파일 크기가 20MB 이하인지 확인하세요

### Q: 기억검색 결과가 없어요!
**A:**
- Memory 페이지에서 "📥 체크인 동기화" 버튼을 눌러보세요
- Settings에서 "자동 인덱싱" 옵션이 켜져 있는지 확인하세요
- 검색 결과 수나 유사도 임계값을 조정해보세요

### Q: Google Calendar가 연결 안 돼요!
**A:**
- Settings에서 Google OAuth 설정이 되어 있는지 확인하세요
- 브라우저 팝업 차단을 해제했는지 확인하세요
- 관리자에게 문의하세요

### Q: 앱이 안 열려요!
**A:** 터미널에서 `streamlit run app.py`를 다시 실행해보세요. 오류 메시지를 확인하세요.

---

## 📞 도움이 필요하면?

문제가 생기면 터미널에 나오는 오류 메시지를 확인해보세요!
대부분의 문제는 서버를 재시작하면 해결돼요:

1. 터미널에서 `Ctrl + C`로 서버 중지
2. `streamlit run app.py`로 다시 시작

그래도 해결되지 않으면 관리자에게 문의하세요.

---

## 🎉 시작해볼까요?

지금 바로 **오늘의 기록**에서 오늘의 첫 신앙 기록을 남겨보세요! ✍️

**하나님의 말씀을 묵상하며 작은 실천을 지속하는 신앙의 루프를 만들어가세요.** ✝️

---

> ⚠️ **면책 조항**: 이 앱은 목회상담/의료를 대체하지 않으며, 기록 기반 성찰과 루틴 형성을 돕는 도구입니다.
